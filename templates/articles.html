<!DOCTYPE html>
<html>
<head>
    <title>Articles</title>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Articles</h1>

    <form id="search-form">
        <label for="search-query">Search:</label>
        <input type="text" id="search-query" name="q">
        <button type="submit">Go</button>
    </form>

    <label for="sort-order">Sort by:</label>
    <select id="sort-order" name="sort">
        <option value="">None</option>
        <option value="date">Date</option>
        <option value="title">Title</option>
    </select>

    <ul id="article-list">
        {% for article in articles %}
            <li>
                <h2><a href="{{ article.link }}">{{ article.title }}</a></h2>
                <p>{{ article.description }}</p>
                <p>{{ article.time }}</p>
            </li>
        {% endfor %}
    </ul>

    <script>
        $(function() {
            // Submit search form when enter key is pressed
            $('#search-query').on('keydown', function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $('#search-form').submit();
                }
            });

            // Submit search form when search button is clicked
            $('#search-form button').on('click', function(event) {
                event.preventDefault();
                $('#search-form').submit();
            });

            // Sort articles when sort dropdown value is changed
            $('#sort-order').on('change', function(event) {
                event.preventDefault();
                var searchParams = new URLSearchParams(window.location.search);
                searchParams.set('sort', $(this).val());
                window.location.search = searchParams.toString();
            });
        });
    </script>
</body>
</html>
